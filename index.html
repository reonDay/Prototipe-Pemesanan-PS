<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Ruangan PlayStation</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: #2c3e50;
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 8px;
            position: relative;
        }
        
        .auth-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
        }
        
        .auth-btn {
            background-color: #1a252f;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        
        h1 {
            margin-bottom: 10px;
        }
        
        .info {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .ruangan-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .ruangan-card {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .ruangan-card:hover {
            transform: translateY(-5px);
        }
        
        .ruangan-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .ps4 {
            border-left: 5px solid #3498db;
        }
        
        .ps5 {
            border-left: 5px solid #e74c3c;
        }
        
        .booking-list {
            margin-top: 15px;
        }
        
        .booking-item {
            background-color: #f9f9f9;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .booking-actions {
            display: flex;
            gap: 5px;
        }
        
        .booking-actions button {
            padding: 5px 10px;
            font-size: 0.8rem;
        }
        
        .available {
            color: #27ae60;
            font-weight: bold;
        }
        
        .booking-form {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: #2c3e50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        
        button:hover {
            background-color: #1a252f;
        }
        
        .harga {
            font-size: 1.2rem;
            font-weight: bold;
            color: #e74c3c;
            margin-top: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #7f8c8d;
        }
        
        /* Kasir Section */
        .kasir-section {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
            display: none;
        }
        
        .kasir-section h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        
        .booking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .booking-table th, .booking-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .booking-table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .booking-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .booking-table tr:hover {
            background-color: #f1f1f1;
        }
        
        .action-btn {
            padding: 6px 12px;
            margin-right: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .edit-btn {
            background-color: #3498db;
            color: white;
        }
        
        .delete-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 400px;
            max-width: 90%;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        @media (max-width: 768px) {
            .ruangan-list {
                grid-template-columns: 1fr;
            }
            
            .auth-buttons {
                position: static;
                margin-bottom: 15px;
                text-align: center;
            }
            
            .booking-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .booking-actions {
                margin-top: 10px;
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Booking Ruangan PlayStation</h1>
            <p>Buka Senin - Minggu, Jam 08:00 - 24:00</p>
            <div class="auth-buttons">
                <button id="btnKasir" class="auth-btn">Login sebagai Kasir</button>
                <button id="btnLogout" class="auth-btn" style="display: none;">Logout</button>
            </div>
        </header>
        
        <div class="info">
            <p><strong>Informasi:</strong> Setiap sesi booking memiliki jeda 5 menit untuk setup dan bersih-bersih.</p>
            <p>Harga: PS4 - Rp 25.000/jam, PS5 - Rp 35.000/jam</p>
        </div>
        
        <h2>Daftar Ruangan</h2>
        <div class="ruangan-list" id="ruanganList">
            <!-- Ruangan akan diisi oleh JavaScript -->
        </div>
        
        <div class="booking-form">
            <h2>Form Pemesanan</h2>
            <div class="form-group">
                <label for="nama">Nama Pemesan:</label>
                <input type="text" id="nama" placeholder="Masukkan nama anda">
            </div>
            
            <div class="form-group">
                <label for="ruangan">Pilih Ruangan:</label>
                <select id="ruangan">
                    <option value="">-- Pilih Ruangan --</option>
                    <!-- Opsi ruangan akan diisi oleh JavaScript -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="tanggal">Tanggal Booking:</label>
                <input type="date" id="tanggal">
            </div>
            
            <div class="form-group">
                <label for="jamMulai">Jam Mulai:</label>
                <select id="jamMulai">
                    <option value="">-- Pilih Jam Mulai --</option>
                    <!-- Opsi jam akan diisi oleh JavaScript -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="durasi">Durasi Booking (jam):</label>
                <select id="durasi">
                    <option value="1">1 jam</option>
                    <option value="2">2 jam</option>
                    <option value="3">3 jam</option>
                    <option value="4">4 jam</option>
                </select>
            </div>
            
            <button id="btnHitung">Hitung Harga</button>
            
            <div class="harga" id="hargaContainer">
                Total Harga: Rp <span id="harga">0</span>
            </div>
            
            <button id="btnBooking" style="margin-top: 20px; background-color: #27ae60;">Booking Sekarang</button>
        </div>
        
        <!-- Kasir Section -->
        <div class="kasir-section" id="kasirSection">
            <h2>Manajemen Booking - Panel Kasir</h2>
            <div class="form-group">
                <label for="filterTanggal">Filter Berdasarkan Tanggal:</label>
                <input type="date" id="filterTanggal">
            </div>
            <button id="btnFilter">Filter</button>
            <button id="btnResetFilter" style="background-color: #7f8c8d;">Reset Filter</button>
            
            <table class="booking-table">
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama Pemesan</th>
                        <th>Ruangan</th>
                        <th>Tanggal</th>
                        <th>Waktu</th>
                        <th>Durasi</th>
                        <th>Total Harga</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody id="bookingTableBody">
                    <!-- Data booking akan diisi oleh JavaScript -->
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- Modal Edit Booking -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Booking</h3>
                <button class="close-btn" id="closeEditModal">&times;</button>
            </div>
            <div class="form-group">
                <label for="editNama">Nama Pemesan:</label>
                <input type="text" id="editNama">
            </div>
            <div class="form-group">
                <label for="editRuangan">Ruangan:</label>
                <select id="editRuangan" disabled>
                    <!-- Opsi ruangan akan diisi oleh JavaScript -->
                </select>
            </div>
            <div class="form-group">
                <label for="editTanggal">Tanggal:</label>
                <input type="date" id="editTanggal">
            </div>
            <div class="form-group">
                <label for="editJamMulai">Jam Mulai:</label>
                <select id="editJamMulai">
                    <!-- Opsi jam akan diisi oleh JavaScript -->
                </select>
            </div>
            <div class="form-group">
                <label for="editDurasi">Durasi (jam):</label>
                <select id="editDurasi">
                    <option value="1">1 jam</option>
                    <option value="2">2 jam</option>
                    <option value="3">3 jam</option>
                    <option value="4">4 jam</option>
                </select>
            </div>
            <button id="btnUpdateBooking" style="background-color: #3498db;">Update Booking</button>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 Booking Ruangan PlayStation. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Data ruangan
            const ruangan = [
                { id: 1, nama: 'Ruang PS4 1', jenis: 'PS4', harga: 25000 },
                { id: 2, nama: 'Ruang PS4 2', jenis: 'PS4', harga: 25000 },
                { id: 3, nama: 'Ruang PS4 3', jenis: 'PS4', harga: 25000 },
                { id: 4, nama: 'Ruang PS5 1', jenis: 'PS5', harga: 35000 },
                { id: 5, nama: 'Ruang PS5 2', jenis: 'PS5', harga: 35000 },
                { id: 6, nama: 'Ruang PS5 3', jenis: 'PS5', harga: 35000 }
            ];
            
            // Data booking (disimpan di localStorage)
            let bookings = JSON.parse(localStorage.getItem('bookings')) || [
                { id: 1, ruanganId: 1, nama: 'Rendy', tanggal: new Date().toISOString().split('T')[0], jamMulai: '10:00', jamSelesai: '12:00', durasi: 2, totalHarga: 50000 },
                { id: 2, ruanganId: 1, nama: 'Cia', tanggal: new Date().toISOString().split('T')[0], jamMulai: '12:05', jamSelesai: '15:05', durasi: 3, totalHarga: 75000 },
                { id: 3, ruanganId: 4, nama: 'Andi', tanggal: new Date().toISOString().split('T')[0], jamMulai: '14:00', jamSelesai: '16:00', durasi: 2, totalHarga: 70000 }
            ];
            
            // Simpan ke localStorage
            localStorage.setItem('bookings', JSON.stringify(bookings));
            
            // Status login kasir
            let isKasirLoggedIn = false;
            
            // Set tanggal minimum ke hari ini
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('tanggal').setAttribute('min', today);
            document.getElementById('tanggal').value = today;
            document.getElementById('filterTanggal').value = today;
            
            // Generate opsi jam (08:00 - 23:00)
            const jamSelect = document.getElementById('jamMulai');
            const editJamSelect = document.getElementById('editJamMulai');
            for (let hour = 8; hour <= 23; hour++) {
                const option = document.createElement('option');
                option.value = `${hour.toString().padStart(2, '0')}:00`;
                option.textContent = `${hour.toString().padStart(2, '0')}:00`;
                jamSelect.appendChild(option);
                
                const editOption = option.cloneNode(true);
                editJamSelect.appendChild(editOption);
            }
            
            // Tampilkan daftar ruangan
            tampilkanRuangan();
            
            // Fungsi untuk menampilkan daftar ruangan
            function tampilkanRuangan() {
                const ruanganList = document.getElementById('ruanganList');
                const ruanganSelect = document.getElementById('ruangan');
                const editRuanganSelect = document.getElementById('editRuangan');
                
                // Kosongkan daftar sebelumnya
                ruanganList.innerHTML = '';
                ruanganSelect.innerHTML = '<option value="">-- Pilih Ruangan --</option>';
                editRuanganSelect.innerHTML = '';
                
                ruangan.forEach(r => {
                    // Tambahkan ke daftar ruangan
                    const card = document.createElement('div');
                    card.className = `ruangan-card ${r.jenis.toLowerCase()}`;
                    
                    const bookingForThisRoom = bookings.filter(b => b.ruanganId === r.id && b.tanggal === today);
                    
                    let statusHTML = '<p class="available">Tersedia</p>';
                    if (bookingForThisRoom.length > 0) {
                        statusHTML = '<div class="booking-list">';
                        bookingForThisRoom.forEach(booking => {
                            statusHTML += `
                                <div class="booking-item">
                                    <div>
                                        <strong>${booking.jamMulai} - ${booking.jamSelesai}</strong><br>
                                        ${booking.nama}
                                    </div>
                                    ${isKasirLoggedIn ? `
                                    <div class="booking-actions">
                                        <button class="edit-btn action-btn" data-id="${booking.id}">Edit</button>
                                        <button class="delete-btn action-btn" data-id="${booking.id}">Hapus</button>
                                    </div>
                                    ` : ''}
                                </div>
                            `;
                        });
                        statusHTML += '</div>';
                    }
                    
                    card.innerHTML = `
                        <h3>${r.nama}</h3>
                        <p>Jenis: ${r.jenis}</p>
                        <p>Harga: Rp ${r.harga.toLocaleString('id-ID')}/jam</p>
                        ${statusHTML}
                    `;
                    
                    ruanganList.appendChild(card);
                    
                    // Tambahkan ke dropdown pemilihan
                    const option = document.createElement('option');
                    option.value = r.id;
                    option.textContent = r.nama;
                    ruanganSelect.appendChild(option);
                    
                    // Tambahkan ke dropdown edit
                    const editOption = document.createElement('option');
                    editOption.value = r.id;
                    editOption.textContent = r.nama;
                    editRuanganSelect.appendChild(editOption);
                });
                
                // Tambahkan event listener untuk tombol edit dan hapus
                if (isKasirLoggedIn) {
                    document.querySelectorAll('.edit-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const bookingId = parseInt(this.getAttribute('data-id'));
                            bukaModalEdit(bookingId);
                        });
                    });
                    
                    document.querySelectorAll('.delete-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const bookingId = parseInt(this.getAttribute('data-id'));
                            hapusBooking(bookingId);
                        });
                    });
                }
            }
            
            // Hitung harga
            document.getElementById('btnHitung').addEventListener('click', function() {
                const ruanganId = document.getElementById('ruangan').value;
                const durasi = document.getElementById('durasi').value;
                
                if (!ruanganId) {
                    alert('Pilih ruangan terlebih dahulu!');
                    return;
                }
                
                const selectedRuangan = ruangan.find(r => r.id == ruanganId);
                const totalHarga = selectedRuangan.harga * durasi;
                
                document.getElementById('harga').textContent = totalHarga.toLocaleString('id-ID');
            });
            
            // Proses booking
            document.getElementById('btnBooking').addEventListener('click', function() {
                const nama = document.getElementById('nama').value;
                const ruanganId = document.getElementById('ruangan').value;
                const tanggal = document.getElementById('tanggal').value;
                const jamMulai = document.getElementById('jamMulai').value;
                const durasi = document.getElementById('durasi').value;
                
                if (!nama || !ruanganId || !tanggal || !jamMulai) {
                    alert('Harap isi semua field!');
                    return;
                }
                
                // Validasi jam mulai (08:00 - 24:00)
                const jamMulaiHour = parseInt(jamMulai.split(':')[0]);
                if (jamMulaiHour < 8 || jamMulaiHour > 23) {
                    alert('Jam booking hanya tersedia antara 08:00 - 24:00');
                    return;
                }
                
                // Hitung jam selesai (dengan jeda 5 menit)
                const jamSelesaiHour = jamMulaiHour + parseInt(durasi);
                const jamSelesai = `${jamSelesaiHour.toString().padStart(2, '0')}:05`;
                
                // Hitung total harga
                const selectedRuangan = ruangan.find(r => r.id == ruanganId);
                const totalHarga = selectedRuangan.harga * durasi;
                
                // Simpan booking
                const newBooking = {
                    id: bookings.length > 0 ? Math.max(...bookings.map(b => b.id)) + 1 : 1,
                    ruanganId: parseInt(ruanganId),
                    nama: nama,
                    tanggal: tanggal,
                    jamMulai: jamMulai,
                    jamSelesai: jamSelesai,
                    durasi: parseInt(durasi),
                    totalHarga: totalHarga
                };
                
                bookings.push(newBooking);
                localStorage.setItem('bookings', JSON.stringify(bookings));
                
                alert(`Booking berhasil!\nAtas nama: ${nama}\nRuangan: ${ruangan.find(r => r.id == ruanganId).nama}\nTanggal: ${tanggal}\nWaktu: ${jamMulai} - ${jamSelesai}\nTotal Harga: Rp ${totalHarga.toLocaleString('id-ID')}`);
                
                // Reset form
                document.getElementById('nama').value = '';
                document.getElementById('ruangan').value = '';
                document.getElementById('jamMulai').value = '';
                document.getElementById('durasi').value = '1';
                document.getElementById('harga').textContent = '0';
                
                // Refresh daftar ruangan untuk menampilkan booking baru
                tampilkanRuangan();
                if (isKasirLoggedIn) {
                    tampilkanDataBooking();
                }
            });
            
            // Login sebagai kasir
            document.getElementById('btnKasir').addEventListener('click', function() {
                const password = prompt('Masukkan password kasir:');
                if (password === 'kasir123') {
                    isKasirLoggedIn = true;
                    document.getElementById('kasirSection').style.display = 'block';
                    document.getElementById('btnKasir').style.display = 'none';
                    document.getElementById('btnLogout').style.display = 'inline-block';
                    tampilkanDataBooking();
                    tampilkanRuangan(); // Refresh untuk menampilkan tombol edit/hapus
                    alert('Login berhasil sebagai kasir!');
                } else {
                    alert('Password salah!');
                }
            });
            
            // Logout
            document.getElementById('btnLogout').addEventListener('click', function() {
                isKasirLoggedIn = false;
                document.getElementById('kasirSection').style.display = 'none';
                document.getElementById('btnKasir').style.display = 'inline-block';
                document.getElementById('btnLogout').style.display = 'none';
                tampilkanRuangan(); // Refresh untuk menghilangkan tombol edit/hapus
                alert('Logout berhasil!');
            });
            
            // Filter data booking
            document.getElementById('btnFilter').addEventListener('click', function() {
                tampilkanDataBooking();
            });
            
            // Reset filter
            document.getElementById('btnResetFilter').addEventListener('click', function() {
                document.getElementById('filterTanggal').value = today;
                tampilkanDataBooking();
            });
            
            // Fungsi untuk menampilkan data booking di panel kasir
            function tampilkanDataBooking() {
                const filterTanggal = document.getElementById('filterTanggal').value;
                const tableBody = document.getElementById('bookingTableBody');
                
                // Kosongkan tabel
                tableBody.innerHTML = '';
                
                // Filter booking berdasarkan tanggal
                const filteredBookings = filterTanggal ? 
                    bookings.filter(b => b.tanggal === filterTanggal) : 
                    bookings;
                
                if (filteredBookings.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="8" style="text-align: center;">Tidak ada data booking</td></tr>';
                    return;
                }
                
                // Urutkan booking berdasarkan tanggal dan jam
                filteredBookings.sort((a, b) => {
                    if (a.tanggal !== b.tanggal) {
                        return a.tanggal.localeCompare(b.tanggal);
                    }
                    return a.jamMulai.localeCompare(b.jamMulai);
                });
                
                // Isi tabel dengan data booking
                filteredBookings.forEach((booking, index) => {
                    const row = document.createElement('tr');
                    const ruanganInfo = ruangan.find(r => r.id === booking.ruanganId);
                    
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${booking.nama}</td>
                        <td>${ruanganInfo ? ruanganInfo.nama : 'Tidak Diketahui'}</td>
                        <td>${booking.tanggal}</td>
                        <td>${booking.jamMulai} - ${booking.jamSelesai}</td>
                        <td>${booking.durasi} jam</td>
                        <td>Rp ${booking.totalHarga.toLocaleString('id-ID')}</td>
                        <td>
                            <button class="edit-btn action-btn" data-id="${booking.id}">Edit</button>
                            <button class="delete-btn action-btn" data-id="${booking.id}">Hapus</button>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Tambahkan event listener untuk tombol edit dan hapus
                document.querySelectorAll('#bookingTableBody .edit-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const bookingId = parseInt(this.getAttribute('data-id'));
                        bukaModalEdit(bookingId);
                    });
                });
                
                document.querySelectorAll('#bookingTableBody .delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const bookingId = parseInt(this.getAttribute('data-id'));
                        hapusBooking(bookingId);
                    });
                });
            }
            
            // Fungsi untuk membuka modal edit booking
            function bukaModalEdit(bookingId) {
                const booking = bookings.find(b => b.id === bookingId);
                if (!booking) return;
                
                document.getElementById('editNama').value = booking.nama;
                document.getElementById('editRuangan').value = booking.ruanganId;
                document.getElementById('editTanggal').value = booking.tanggal;
                document.getElementById('editJamMulai').value = booking.jamMulai;
                document.getElementById('editDurasi').value = booking.durasi;
                
                // Simpan ID booking yang sedang diedit
                document.getElementById('btnUpdateBooking').setAttribute('data-id', bookingId);
                
                // Tampilkan modal
                document.getElementById('editModal').style.display = 'flex';
            }
            
            // Tutup modal edit
            document.getElementById('closeEditModal').addEventListener('click', function() {
                document.getElementById('editModal').style.display = 'none';
            });
            
            // Update booking
            document.getElementById('btnUpdateBooking').addEventListener('click', function() {
                const bookingId = parseInt(this.getAttribute('data-id'));
                const bookingIndex = bookings.findIndex(b => b.id === bookingId);
                
                if (bookingIndex === -1) return;
                
                const nama = document.getElementById('editNama').value;
                const tanggal = document.getElementById('editTanggal').value;
                const jamMulai = document.getElementById('editJamMulai').value;
                const durasi = parseInt(document.getElementById('editDurasi').value);
                
                if (!nama || !tanggal || !jamMulai) {
                    alert('Harap isi semua field!');
                    return;
                }
                
                // Validasi jam mulai (08:00 - 24:00)
                const jamMulaiHour = parseInt(jamMulai.split(':')[0]);
                if (jamMulaiHour < 8 || jamMulaiHour > 23) {
                    alert('Jam booking hanya tersedia antara 08:00 - 24:00');
                    return;
                }
                
                // Hitung jam selesai (dengan jeda 5 menit)
                const jamSelesaiHour = jamMulaiHour + durasi;
                const jamSelesai = `${jamSelesaiHour.toString().padStart(2, '0')}:05`;
                
                // Hitung total harga
                const ruanganInfo = ruangan.find(r => r.id === bookings[bookingIndex].ruanganId);
                const totalHarga = ruanganInfo.harga * durasi;
                
                // Update booking
                bookings[bookingIndex] = {
                    ...bookings[bookingIndex],
                    nama: nama,
                    tanggal: tanggal,
                    jamMulai: jamMulai,
                    jamSelesai: jamSelesai,
                    durasi: durasi,
                    totalHarga: totalHarga
                };
                
                localStorage.setItem('bookings', JSON.stringify(bookings));
                
                alert('Booking berhasil diupdate!');
                
                // Tutup modal dan refresh data
                document.getElementById('editModal').style.display = 'none';
                tampilkanRuangan();
                tampilkanDataBooking();
            });
            
            // Fungsi untuk menghapus booking
            function hapusBooking(bookingId) {
                if (!confirm('Apakah Anda yakin ingin menghapus booking ini?')) return;
                
                bookings = bookings.filter(b => b.id !== bookingId);
                localStorage.setItem('bookings', JSON.stringify(bookings));
                
                alert('Booking berhasil dihapus!');
                
                // Refresh data
                tampilkanRuangan();
                if (isKasirLoggedIn) {
                    tampilkanDataBooking();
                }
            }
        });
    </script>
</body>
</html>